tests:
  - name: "Env 默认值"
    description: "未设置环境变量时使用 default"
    cmd: "argonaut"
    args:
      - "bind"
      - "--shell-type=sh"
      - "--flag=name"
      - "--flag-name-default=app"
      - "--flag-name-env-name=APP_NAME"
      - "--"
      - "a"
    expect:
      exitCode: 0
      stdout: |
        APP_NAME='app'
      stderr: ""

  - name: "Env 由外部提供"
    description: "预期在运行前设置 APP_NAME"
    cmd: "argonaut"
    args:
      - "bind"
      - "--shell-type=sh"
      - "--flag=name"
      - "--flag-name-env-name=APP_NAME"
      - "--"
      - "a"
    expect:
      exitCode: 0
      stdout: |
        APP_NAME=''
      stderr: ""

  - name: "Env export true (cmd)"
    description: "在 Windows cmd 中 setx 导出"
    cmd: "argonaut"
    args:
      - "bind"
      - "--shell-type=cmd"
      - "--flag=name"
      - "--flag-name-env-name=APP_NAME"
      - "--flag-name-export=true"
      - "--"
      - "a"
      - "--name=prod"
    expect:
      exitCode: 0
      stdout: |
        setx APP_NAME "prod"
      stderr: ""